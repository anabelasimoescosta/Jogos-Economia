<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Desafio UE - Drag & Drop</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    text-align:center;
    background: linear-gradient(135deg,#003399,#0055cc,#ffcc00);
    color:white;
}

.container{
    width:95%;
    max-width:900px;
    margin:20px auto;
    background:rgba(0,0,0,0.85);
    padding:20px;
    border-radius:20px;
}

h1{font-size:24px;}
h2{font-size:18px;}

#progressBar{
    width:100%;
    background:#444;
    border-radius:10px;
    margin:15px 0;
}

#progress{
    height:18px;
    width:0%;
    background:#ffcc00;
    border-radius:10px;
}

.questionBox{
    background:#1e3c72;
    padding:15px;
    border-radius:12px;
    margin:15px 0;
}

.dropZone{
    margin-top:10px;
    padding:15px;
    border:2px dashed #ffcc00;
    border-radius:10px;
    min-height:40px;
}

.options{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    margin-top:20px;
}

.draggable{
    background:#ffcc00;
    color:#003399;
    padding:10px 15px;
    border-radius:8px;
    margin:8px;
    cursor:grab;
    font-weight:bold;
}

button{
    width:100%;
    padding:12px;
    margin-top:15px;
    border-radius:10px;
    border:none;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    background:#ffcc00;
    color:#003399;
}

.hidden{display:none;}

#feedback{
    margin-top:15px;
    font-weight:bold;
}
</style>
</head>

<body>

<div id="cover" class="container">
    <h1> União Europeia & Economia</h1>
    <p>Arrasta a resposta correta para a pergunta.</p>
    <button onclick="startGame()">Iniciar Jogo</button>
</div>

<div id="game" class="container hidden">
    <h2 id="question"></h2>
    <p id="questionNumber"></p>
    <div id="progressBar"><div id="progress"></div></div>

    <div class="questionBox">
        <div class="dropZone" id="dropZone"
            ondragover="allowDrop(event)"
            ondrop="drop(event)">
            Arrasta aqui a resposta correta
        </div>
    </div>

    <div class="options" id="options"></div>
    <div id="feedback"></div>
</div>

<div id="result" class="container hidden">
    <h2>Resultado Final</h2>
    <p id="scoreText"></p>
    <p><strong>Se queres saber mais sobre estes assuntos, inscreve-te no 10.º ano do curso profissional de técnico de Gestão.</strong></p>
    <button onclick="location.reload()">Jogar Novamente</button>
</div>

<script>

const questions = [
{q:"Moeda oficial da maioria dos países da UE",a:"Euro"},
{q:"Banco responsável pela política monetária da Zona Euro",a:"Banco Central Europeu"},
{q:"Tratado que criou a União Europeia em 1993",a:"Tratado de Maastricht"},
{q:"Indicador que mede a produção total de um país",a:"PIB"},
{q:"Acordo que eliminou fronteiras internas",a:"Schengen"},
{q:"Política Agrícola Comum (sigla)",a:"PAC"},
{q:"Instituição que propõe legislação europeia",a:"Comissão Europeia"},
{q:"Fundo que apoia regiões menos desenvolvidas",a:"Fundo de Coesão"},
{q:"Número atual de países da UE",a:"27"},
{q:"Mercado que permite livre circulação na UE",a:"Mercado Único"}
];

let current=0;
let score=0;
let shuffledOptions=[];

function startGame(){
document.getElementById("cover").classList.add("hidden");
document.getElementById("game").classList.remove("hidden");
showQuestion();
}

function showQuestion(){

let q=questions[current];

document.getElementById("question").innerText=q.q;
document.getElementById("questionNumber").innerText="Questão "+(current+1)+" de "+questions.length;
document.getElementById("progress").style.width=(current/questions.length)*100+"%";

document.getElementById("dropZone").innerText="Arrasta aqui a resposta correta";
document.getElementById("feedback").innerText="";

let optionsDiv=document.getElementById("options");
optionsDiv.innerHTML="";

shuffledOptions=[...questions].sort(()=>0.5-Math.random()).slice(0,4);
if(!shuffledOptions.includes(q)){
shuffledOptions[0]=q;
}

shuffledOptions.forEach(option=>{
let div=document.createElement("div");
div.className="draggable";
div.draggable=true;
div.innerText=option.a;
div.id=option.a;
div.ondragstart=function(e){e.dataTransfer.setData("text",e.target.id);}
optionsDiv.appendChild(div);
});
}

function allowDrop(ev){
ev.preventDefault();
}

function drop(ev){
ev.preventDefault();
let data=ev.dataTransfer.getData("text");
let dropZone=document.getElementById("dropZone");
let feedback=document.getElementById("feedback");

dropZone.innerText=data;

if(data===questions[current].a){
score++;
feedback.style.color="#2ecc71";
feedback.innerText="✅ Correto!";
}else{
feedback.style.color="#ff7675";
feedback.innerText="❌ Incorreto. A resposta correta é: "+questions[current].a;
}

setTimeout(function(){
current++;
if(current<questions.length){
showQuestion();
}else{
endGame();
}
},3000);
}

function endGame(){
document.getElementById("game").classList.add("hidden");
document.getElementById("result").classList.remove("hidden");
document.getElementById("progress").style.width="100%";
document.getElementById("scoreText").innerText="Pontuação final: "+score+" / "+questions.length;
}

</script>

</body>
</html>
